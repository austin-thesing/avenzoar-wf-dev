!function(){"use strict";const t=window.matchMedia("(max-width: 768px)").matches||/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),i={dotOpacity:.4,dotColor:"#050a14",waveSpeed:.1,dotSpacing:35,dotSize:3.5,waveAmplitude:60,perspective:800,fov:600,heightPercent:100};t&&(i.dotSpacing=50,i.dotSize=2);class e{constructor(e){this.container=e,this.canvas=null,this.ctx=null,this.particles=[],this.time=0,this.rafId=null,this.resizeObserver=null,this.config={dotOpacity:parseFloat(e.dataset.dotOpacity)||i.dotOpacity,dotColor:e.dataset.dotColor||i.dotColor,waveSpeed:parseFloat(e.dataset.waveSpeed)||i.waveSpeed,dotSpacing:parseFloat(e.dataset.dotSpacing)||i.dotSpacing,heightPercent:parseFloat(e.dataset.height)||i.heightPercent,dotSize:i.dotSize,waveAmplitude:i.waveAmplitude,perspective:i.perspective,fov:i.fov},t&&(this.config.dotSpacing=Math.max(this.config.dotSpacing,30),this.config.dotSize=Math.max(this.config.dotSize,1.5)),this.init()}init(){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100%",this.canvas.style.height=`${this.config.heightPercent}%`,this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="0",this.ctx=this.canvas.getContext("2d"),this.container.firstChild?this.container.insertBefore(this.canvas,this.container.firstChild):this.container.appendChild(this.canvas);"static"===getComputedStyle(this.container).position&&(this.container.style.position="relative"),this.resizeObserver=new ResizeObserver(()=>this.handleResize()),this.resizeObserver.observe(this.container),this.handleResize(),"undefined"!=typeof gsap&&gsap.ticker?gsap.ticker.add(this.animate.bind(this)):this.animate()}handleResize(){const t=this.container.getBoundingClientRect(),i=window.devicePixelRatio||1;this.canvas.width=t.width*i,this.canvas.height=t.height*i,this.canvas.style.width=`${t.width}px`,this.canvas.style.height=`${t.height}px`,this.ctx.scale(i,i),this.width=t.width,this.height=t.height,this.createParticles()}createParticles(){this.particles=[];const t=this.config.dotSpacing,i=2.5*Math.ceil(this.width/t),e=3*Math.ceil(this.height/t),s=-i*t/2;for(let a=0;a<i;a++)for(let i=0;i<e;i++){const e=s+a*t,h=i*t-200;this.particles.push({x:e,y:0,z:h,baseX:e,baseZ:h})}}animate(){if(!this.ctx||!this.canvas)return;this.ctx.clearRect(0,0,this.width,this.height),this.time+=.01*this.config.waveSpeed;const t=this.width/2,i=1.2*this.height,e=this.config.fov;this.ctx.fillStyle=this.config.dotColor;for(let s=0;s<this.particles.length;s++){const a=this.particles[s],h=Math.sin(.001*a.baseX+.001*a.baseZ+this.time),n=Math.cos(.002*a.baseX-.5*this.time);a.y=h*this.config.waveAmplitude*2+n*this.config.waveAmplitude*.5;const o=100*Math.sin(.001*a.baseZ+this.time);a.x=a.baseX+o;const c=1,d=0;let r=a.y*Math.cos(c)-a.z*Math.sin(c),l=a.y*Math.sin(c)+a.z*Math.cos(c),p=a.x*Math.cos(d)-l*Math.sin(d),g=a.x*Math.sin(d)+l*Math.cos(d);if(g+=600,g<100)continue;const v=e/g,f=t+p*v,m=i+r*v,w=g,u=Math.max(0,Math.min(1,(2e3-w)/800))*this.config.dotOpacity,x=this.config.dotSize*v;u>.01&&x>.1&&(this.ctx.globalAlpha=u,this.ctx.beginPath(),this.ctx.arc(f,m,x,0,2*Math.PI),this.ctx.fill())}this.ctx.globalAlpha=1,this.drawGradientMask(),"undefined"!=typeof gsap&&gsap.ticker||(this.rafId=requestAnimationFrame(this.animate.bind(this)))}drawGradientMask(){this.ctx.save(),this.ctx.globalCompositeOperation="destination-out";const t=this.ctx.createLinearGradient(.5*this.width,0,.85*this.width,0);t.addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.restore()}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),this.rafId&&cancelAnimationFrame(this.rafId),"undefined"!=typeof gsap&&gsap.ticker&&gsap.ticker.remove(this.animate.bind(this)),this.canvas&&this.canvas.remove(),this.particles=[]}}function s(){document.querySelectorAll("#wave-dots-bg").forEach(t=>{if(t.dataset.waveDotsInitialized)return;t.dataset.waveDotsInitialized="true";const i=new e(t);t._waveDotsAnimation=i,t.addEventListener("animationcleanup",()=>{i.destroy(),delete t.dataset.waveDotsInitialized,delete t._waveDotsAnimation},{once:!0})})}"complete"===document.readyState||"interactive"===document.readyState?requestAnimationFrame(s):document.addEventListener("DOMContentLoaded",s,{once:!0})}();